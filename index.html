<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Neon Casino V2</title>

<style>
body {
  margin:0;
  background:#05070d;
  font-family:system-ui;
  color:white;
  text-align:center;
}
header {
  padding:15px;
  font-size:26px;
  font-weight:700;
  color:#00ffd5;
}
.card {
  background:#0e1325;
  margin:15px auto;
  padding:20px;
  border-radius:16px;
  max-width:420px;
  box-shadow:0 0 30px rgba(0,255,213,.25);
}
button {
  width:100%;
  padding:14px;
  margin-top:10px;
  font-size:16px;
  border:none;
  border-radius:12px;
  background:linear-gradient(135deg,#f5c542,#ff9800);
  cursor:pointer;
}
button:active { transform:scale(.97); }
canvas {
  background:#02030a;
  border-radius:12px;
}
.hidden { display:none; }
</style>
</head>

<body>

<header>ðŸŽ° Neon Casino</header>

<div id="login" class="card">
  <h2>Create / Login Account</h2>
  <input id="user" placeholder="Username"><br><br>
  <button onclick="login()">Enter Casino</button>
</div>

<div id="casino" class="hidden">
  <div class="card">
    <div id="balance"></div>
    <div id="hash"></div>
  </div>

  <div class="card">
    <button onclick="show('roulette')">ðŸŽ¡ Roulette</button>
    <button onclick="show('crash')">ðŸ“‰ Crash</button>
  </div>

  <!-- ROULETTE -->
  <div id="roulette" class="card hidden">
    <h2>Roulette</h2>
    <canvas id="wheel" width="300" height="300"></canvas>
    <button onclick="spinRoulette()">Spin ($100)</button>
  </div>

  <!-- CRASH -->
  <div id="crash" class="card hidden">
    <h2>Crash</h2>
    <canvas id="graph" width="300" height="200"></canvas>
    <button onclick="startCrash()">Start ($50)</button>
  </div>
</div>

<audio id="spinSound" src="https://assets.codepen.io/3/coin.mp3"></audio>
<audio id="winSound" src="https://assets.codepen.io/3/success.mp3"></audio>

<script>
/* ======================
   ACCOUNT SYSTEM
====================== */
let user, balance, seed;

function login() {
  user = document.getElementById("user").value;
  if(!user) return;
  let data = JSON.parse(localStorage.getItem(user)) || {balance:1000};
  balance = data.balance;
  seed = crypto.randomUUID();
  save();
  document.getElementById("login").classList.add("hidden");
  document.getElementById("casino").classList.remove("hidden");
}

/* ======================
   PROVABLY FAIR
====================== */
function fairRandom() {
  let hash = crypto.subtle.digest("SHA-256", new TextEncoder().encode(seed));
  seed = crypto.randomUUID();
  return Math.random();
}

/* ======================
   SAVE / UI
====================== */
function save() {
  localStorage.setItem(user, JSON.stringify({balance}));
  document.getElementById("balance").innerText = `Balance: $${balance}`;
  document.getElementById("hash").innerText = `Seed: ${seed.slice(0,8)}...`;
}

function show(id) {
  document.querySelectorAll(".card.hidden").forEach(d=>d.classList.add("hidden"));
  document.getElementById(id).classList.remove("hidden");
}

/* ======================
   ROULETTE (CANVAS)
====================== */
const wheel = document.getElementById("wheel");
const wctx = wheel.getContext("2d");
let angle = 0;

function drawWheel() {
  wctx.clearRect(0,0,300,300);
  for(let i=0;i<37;i++){
    wctx.beginPath();
    wctx.moveTo(150,150);
    wctx.arc(150,150,140,angle+i*0.17,angle+(i+1)*0.17);
    wctx.fillStyle=i%2?"red":"black";
    wctx.fill();
  }
}

function spinRoulette() {
  if(balance<100) return;
  balance-=100;
  document.getElementById("spinSound").play();
  let spins=0;
  let interval=setInterval(()=>{
    angle+=0.2;
    drawWheel();
    spins++;
    if(spins>40){
      clearInterval(interval);
      let win=Math.floor(Math.random()*37)%2===0;
      if(win){balance+=200;document.getElementById("winSound").play();}
      save();
    }
  },30);
}

/* ======================
   CRASH GRAPH
====================== */
const graph=document.getElementById("graph");
const gctx=graph.getContext("2d");

function startCrash() {
  if(balance<50) return;
  balance-=50;
  let x=0,y=200,m=1;
  let crash=Math.random()*5+1;
  gctx.clearRect(0,0,300,200);

  let interval=setInterval(()=>{
    x+=3;
    m+=0.05;
    y=200-(m*30);
    gctx.lineTo(x,y);
    gctx.strokeStyle="#00ffd5";
    gctx.stroke();
    if(m>=crash){
      clearInterval(interval);
      save();
    }
  },30);
}
</script>

</body>
</html>
